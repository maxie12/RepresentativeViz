## RepresentativeTreeViz

This prototype "clusters" the output of an infection map into trees of similar epidemic structure based on the R_t tree distance. A representative tree is chosen for the "clusters" and is used as a basis for visualization. A post-hoc policy simulation is performed to determine how different policies affect a given InfectionMap.

### Code Overview and Technology

This project uses Java to preprocess the data with a CPLEX library to calculate the Tree Edit Distance and JUNIT for unit test.
The visualization using Javascript with d3 and requirejs.

To run the project, use the main method supplied in DataToJsonTree.java in GraphVisualization/RepresentativeTreeCalculator/ . Specify the inputfolder location and ensure that it has the following files:

infectionMap.txt
events.csv
contacts_pop_XXXX.csv
people_pop_XXXX.csv

These files are generated by the simulation output of https://github.com/ScottishCovidResponse/Contact-Tracing-Model
Example output files from a run are supplied in GraphVisualization/RepresentativeTreeCalculator/Data/SimulationData
Input files for the simulation 


The resulting output files can be copied to ContactSimulationViz/data which will need to be hosted on a (local) webserver. 
An example version (not always the latest) is available at http://cs.swansea.ac.uk/ContactViz/ContactSimulationViz/

RepresentativeTreeCalculator/ contains the code to generate the representative keys
JsonMerge/ contains a small subproject to merge Json files of the output of the RepresentativeTreeCalculator/ when not all data is calculated in one go
ContactSimulationViz/ contains the code to visualize the generated trees


### Example screenshots

Here is a screenshot from the prototype from 07/06/2021 where the resulting representative trees are visualized and a post-hoc policy on the trace of an infection map is visualized:

![Screen-1](ExampleViz.JPG)


